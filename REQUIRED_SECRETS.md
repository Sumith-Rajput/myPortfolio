# Required GitHub Secrets

This document lists all secrets required by the workflows.

## üî¥ Active Workflow: Frontend Deployment

**File**: `.github/workflows/azure-static-web-apps-ambitious-mud-099772e10.yml`

### Required Secrets:

#### 1. `VITE_API_URL` ‚ö†Ô∏è **REQUIRED**
- **Purpose**: Backend API URL for the frontend build
- **Value**: `https://sumith-portfolio-api-g3dra2a9g6haaxev.centralus-01.azurewebsites.net/api`
- **Note**: Must include `/api` at the end
- **Used in**: Build step (line 35)

#### 2. `AZURE_STATIC_WEB_APPS_API_TOKEN_AMBITIOUS_MUD_099772E10` ‚ö†Ô∏è **REQUIRED**
- **Purpose**: Deployment token for Azure Static Web App
- **How to get**:
  1. Go to Azure Portal ‚Üí Static Web Apps ‚Üí **ambitious-mud-099772e10**
  2. Click **"Manage deployment token"**
  3. Copy the token
- **Used in**: Deployment step (lines 99, 119)
- **Note**: This is auto-generated by Azure when you create the Static Web App

#### 3. `GITHUB_TOKEN` ‚úÖ **AUTO-PROVIDED**
- **Purpose**: GitHub token for repository access
- **Note**: Automatically provided by GitHub Actions, no need to set manually
- **Used in**: Deployment step (line 100)

---

## üü° Other Workflows (Currently Disabled or Secondary)

### Backend Deployment Workflow

**File**: `.github/workflows/deploy-backend.yml`

#### Required Secrets:

1. **`AZURE_WEBAPP_NAME`**
   - **Value**: `sumith-portfolio-api-g3dra2a9g6haaxev`
   - **Purpose**: Name of the Azure App Service for backend

2. **`AZURE_RESOURCE_GROUP`**
   - **Value**: Your resource group name (e.g., `portfolio-rg`)
   - **Purpose**: Azure resource group containing the App Service

3. **`AZURE_CREDENTIALS`**
   - **Purpose**: Azure service principal credentials (JSON)
   - **How to get**: 
     ```bash
     az ad sp create-for-rbac --name "portfolio-github-actions" \
       --role contributor \
       --scopes /subscriptions/{subscription-id}/resourceGroups/{resource-group} \
       --sdk-auth
     ```
   - **Format**: JSON object with `clientId`, `clientSecret`, `subscriptionId`, `tenantId`

### Combined Deployment Workflow

**File**: `.github/workflows/deploy.yml`

#### Required Secrets:

1. **`AZURE_WEBAPP_NAME`** - Same as above
2. **`AZURE_RESOURCE_GROUP`** - Same as above
3. **`AZURE_CREDENTIALS`** - Same as above
4. **`AZURE_STATIC_WEB_APPS_API_TOKEN`** - Different from the auto-generated one
5. **`VITE_API_URL`** - Same as above

---

## üìã Summary: Secrets You MUST Have

### For Frontend Deployment (Currently Active):

| Secret Name | Status | Where to Get |
|------------|--------|--------------|
| `VITE_API_URL` | ‚ö†Ô∏è **REQUIRED** | Set manually: `https://sumith-portfolio-api-g3dra2a9g6haaxev.centralus-01.azurewebsites.net/api` |
| `AZURE_STATIC_WEB_APPS_API_TOKEN_AMBITIOUS_MUD_099772E10` | ‚ö†Ô∏è **REQUIRED** | Azure Portal ‚Üí Static Web App ‚Üí Manage deployment token |
| `GITHUB_TOKEN` | ‚úÖ Auto | Provided automatically by GitHub |

### For Backend Deployment (If Needed):

| Secret Name | Status | Where to Get |
|------------|--------|--------------|
| `AZURE_WEBAPP_NAME` | ‚ö†Ô∏è **REQUIRED** | `sumith-portfolio-api-g3dra2a9g6haaxev` |
| `AZURE_RESOURCE_GROUP` | ‚ö†Ô∏è **REQUIRED** | Your Azure resource group name |
| `AZURE_CREDENTIALS` | ‚ö†Ô∏è **REQUIRED** | Azure CLI or Portal (Service Principal) |

---

## üîç How to Check Current Secrets

1. Go to: `https://github.com/Sumith-Rajput/myPortfolio/settings/secrets/actions`
2. You'll see all configured secrets
3. Check if the required ones are present

## üîß How to Add/Update Secrets

1. Go to: `https://github.com/Sumith-Rajput/myPortfolio/settings/secrets/actions`
2. Click **"New repository secret"** (or **"Update"** for existing ones)
3. Enter the **exact name** (case-sensitive!)
4. Paste the **value**
5. Click **"Add secret"** (or **"Update secret"**)

## ‚ö†Ô∏è Important Notes

1. **Case-sensitive**: Secret names must match exactly (including capitalization)
2. **No spaces**: Secret names should not have spaces
3. **Auto-generated tokens**: The `AZURE_STATIC_WEB_APPS_API_TOKEN_AMBITIOUS_MUD_099772E10` is auto-generated by Azure
4. **Token expiration**: If deployment fails with "invalid token", regenerate it from Azure Portal
5. **URL format**: `VITE_API_URL` must end with `/api`

---

## üö® Common Issues

### Issue: "VITE_API_URL is not set"
- **Fix**: Add the secret `VITE_API_URL` with value: `https://sumith-portfolio-api-g3dra2a9g6haaxev.centralus-01.azurewebsites.net/api`

### Issue: "No matching Static Web App was found or the api key was invalid"
- **Fix**: 
  1. Go to Azure Portal ‚Üí Static Web App ‚Üí Manage deployment token
  2. Copy the new token
  3. Update `AZURE_STATIC_WEB_APPS_API_TOKEN_AMBITIOUS_MUD_099772E10` secret

### Issue: "AZURE_WEBAPP_NAME is missing"
- **Fix**: Add secret `AZURE_WEBAPP_NAME` with value: `sumith-portfolio-api-g3dra2a9g6haaxev`

---

## üìù Quick Checklist

For the **currently active frontend deployment workflow**, ensure you have:

- [ ] `VITE_API_URL` = `https://sumith-portfolio-api-g3dra2a9g6haaxev.centralus-01.azurewebsites.net/api`
- [ ] `AZURE_STATIC_WEB_APPS_API_TOKEN_AMBITIOUS_MUD_099772E10` = (token from Azure Portal)
- [ ] `GITHUB_TOKEN` = (auto-provided, no action needed)

